<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lista de Empresas</title>
    <link rel="stylesheet" href="/lista.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <nav class="sidebar">
        <h2 class="sidebar-title">Menu</h2>
        <a href="/" class="topic">Página Principal</a>
        <a class="active">Empresas</a>
        <a href="/funcionarios" class="topic">Funcionários</a>
        <a href="/localizacao/listar" class="topic">Localizações</a>
        <a href="/servicos" class="topic">Serviços</a>
        <a href="/clientes" class="topic">Clientes</a>
        <a href="/dashboards" class="topic">Dashboards</a>
    </nav>

    <main class="main-content">
        <div class="table-container">

            <form action="/empresa/listar" method="get">
                <label for="ordenarPor">Ordenar por:</label>
                <select name="ordenarPor" id="ordenarPor">
                    <option value="">Selecione</option>
                    <option value="nome">Nome</option>
                    <option value="capital">Capital Social</option>
                </select>
                <button type="submit">Aplicar</button>
            </form>
            
            <table>
                <thead>
                    <tr>
                        <th>CNPJ</th>
                        <th>NOME</th>
                        <th>E-MAIL</th>
                        <th>CAPITAL SOCIAL</th>
                        <th>TELEFONE</th>
                        <th>CEP</th>
                        <th>RUA</th>
                        <th>NÚMERO</th>
                        <th>BAIRRO</th>
                        <th>CIDADE</th>
                        <th>ESTADO</th>
                        <th>PAÍS</th>
                        <th>REGIÃO</th>
                        <th>AÇÕES</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="empresa : ${empresas}">
                        <td th:text="${empresa.cnpj}"></td>
                        <td th:text="${empresa.nome}"></td>
                        <td th:text="${empresa.email}"></td>
                        <td th:text=" 'R$'+ ${empresa.capitalSocial}"></td>
                        <td th:text="${empresa.telefone}"></td>
                        <td th:text="${empresa.cep}"></td>
                        <td th:text="${empresa.rua}"></td>
                        <td th:text="${empresa.numero}"></td>
                        <td th:text="${empresa.bairro}"></td>
                        <td th:text="${empresa.cidade}"></td>
                        <td th:text="${empresa.nomeEstado}"></td>
                        <td th:text="${empresa.nomePais}"></td>
                        <td th:text="${empresa.regiao}"></td>
                        <td>
                            <form th:action="@{/empresa/editar}" method="get" class="action-form">
                                <input type="hidden" name="cnpj" th:value="${empresa.cnpj}" />
                                <button type="submit" class="action-button"><i class="fas fa-edit"></i></button>
                            </form>
                            <form th:action="@{/empresa/remover}" method="post" class="action-form"
                                  onsubmit="return confirm('Deseja realmente remover esta empresa?')">
                                <input type="hidden" name="cnpj" th:value="${empresa.cnpj}" />
                                <button type="submit" class="action-button delete"><i class="fas fa-trash-alt"></i></button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    
        <a class="btn fixed-btn" href="/empresa">Cadastrar Empresa</a>

        <div th:if="${erro}" class="error-message">
            <p th:text="${erro}"></p>
        </div>
    </main>
</body>
</html>
