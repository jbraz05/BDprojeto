<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Cadastro de Cliente</title>
</head>
<body>
    <h1>Cadastro de Cliente</h1>

    <form id="clienteForm">
        <label>Tipo de Cliente:</label><br>
        <select name="tipo" required>
            <option value="pf">Pessoa Física</option>
            <option value="pj">Pessoa Jurídica</option>
        </select><br><br>

        <label>CPF ou CNPJ:</label><br>
        <input type="text" name="cnpjCpf" required><br><br>

        <label>Nome:</label><br>
        <input type="text" name="nome" required><br><br>

        <label>Rua:</label><br>
        <input type="text" name="rua"><br><br>

        <label>Número:</label><br>
        <input type="text" name="numero"><br><br>

        <label>Bairro:</label><br>
        <input type="text" name="bairro"><br><br>

        <button type="submit">Cadastrar</button>
    </form>

    <div id="resultado"></div>

    <script>
        document.getElementById("clienteForm").addEventListener("submit", function(event) {
            event.preventDefault();

            const tipo = event.target.tipo.value;
            const dadosCliente = {
                cnpjCpf: event.target.cnpjCpf.value,
                nome: event.target.nome.value,
                rua: event.target.rua.value,
                numero: event.target.numero.value,
                bairro: event.target.bairro.value
            };

            const urlTipo = tipo === "pf" ? "/cliente/cadastrar/pf" : "/cliente/cadastrar/pj";

            fetch(urlTipo, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(dadosCliente)
            })
            .then(res => res.text())
            .then(msg => {
                document.getElementById("resultado").innerText = msg;
            })
            .catch(err => {
                document.getElementById("resultado").innerText = "Erro ao enviar dados: " + err;
            });
        });
    </script>
</body>
</html>
